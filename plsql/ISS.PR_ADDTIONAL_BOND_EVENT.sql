CREATE OR REPLACE PROCEDURE ISS.PR_ADDTIONAL_BOND_EVENT (
  I_BOND_TRADE IN OUT BOND_TRADE%ROWTYPE -- ROWTYPE : 거래내역 TABLE
) IS
  --
  T_EVENT_INFO   EVENT_INFO_TYPE;        -- TYPE : EVENT_INFO_TYPE
  T_BOND_BALANCE BOND_BALANCE%ROWTYPE;   -- ROWTYPE : 잔고 TABLE
BEGIN
  ----------------------------------------------------------------------------------------------------
  -- 1)입력값 검증
  ----------------------------------------------------------------------------------------------------
  
  
  
  ----------------------------------------------------------------------------------------------------
  -- 2)변수초기화
  --   * Object들을 초기화 및 Default값으로 설정함
  ----------------------------------------------------------------------------------------------------

  
  
  ----------------------------------------------------------------------------------------------------
  -- 3-1)INPUT 설정
  ----------------------------------------------------------------------------------------------------
  
  ----------------------------------------------------------------------------------------------------
  -- 3-2)최초 매수 이벤트 처리 프로시져 호출
  --   * 경과이자, 현금흐름 생성, EIR산출, 상각표 생성 처리
  ----------------------------------------------------------------------------------------------------
  PKG_EIR_NESTED_NSC.PR_EVENT(T_EVENT_INFO, T_EVENT_RESULT);
  
  
  
  ----------------------------------------------------------------------------------------------------
  -- 4)기준정보 계산
  --   * T_EVENT_RESULT 데이터를 가지고 기준정보 설정
  --   * 기준정보에 필요한 조회 및 계산 로직 등을 구현
  ----------------------------------------------------------------------------------------------------
  
  
  
  ----------------------------------------------------------------------------------------------------
  -- 5-1)거래내역 등록
  ----------------------------------------------------------------------------------------------------
  INSERT INTO ISS.BOND_TRADE VALUES I_BOND_TRADE;
  
  ----------------------------------------------------------------------------------------------------
  -- 5-2)잔고 등록
  ----------------------------------------------------------------------------------------------------
  INSERT INTO ISS.BOND_BALANCE VALUES T_BOND_BALANCE;
  
  
END;